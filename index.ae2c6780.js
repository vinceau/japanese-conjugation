function t(t){return null===t?"null":t!==Object(t)?typeof t:{}.toString.call(t).slice(8,-1).toLowerCase()}function e(e){return"string"!==t(e)||!e.length}function n(t="",n,r){if(e(t))return!1;const i=t.charCodeAt(0);return n<=i&&i<=r}const r="toHiragana",i="toKatakana",o="hepburn",a={useObsoleteKana:!1,passRomaji:!1,upcaseKatakana:!1,IMEMode:!1,convertLongVowelMark:!0,romanization:o},s=12353,u=[65313,65338],c=[65345,65370],l=[65377,65381],d=[[12288,12351],l,[12539,12540],[65281,65295],[65306,65311],[65339,65343],[65371,65376],[65504,65518]],f=[...[[12352,12447],[12448,12543],l,[65382,65439]],...d,u,c,[65296,65305],[19968,40959],[13312,19903]];function g(t=""){return f.some((([e,r])=>n(t,e,r)))}function y(n="",r){const i="regexp"===t(r);return!e(n)&&[...n].every((t=>{const e=g(t);return i?e||r.test(t):e}))}var p=Number.isNaN||function(t){return"number"==typeof t&&t!=t};function m(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(r=t[n],i=e[n],!(r===i||p(r)&&p(i)))return!1;var r,i;return!0}function h(t,e){void 0===e&&(e=m);var n=null;function r(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(n&&n.lastThis===this&&e(r,n.lastArgs))return n.lastResult;var o=t.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return r.clear=function(){n=null},r}var v=Object.prototype.hasOwnProperty;function j(t,e,n){for(n of t.keys())if(k(n,e))return n}function k(t,e){var n,r,i;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&k(t[r],e[r]););return-1===r}if(n===Set){if(t.size!==e.size)return!1;for(r of t){if((i=r)&&"object"==typeof i&&!(i=j(e,i)))return!1;if(!e.has(i))return!1}return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t){if((i=r[0])&&"object"==typeof i&&!(i=j(e,i)))return!1;if(!k(r[1],e.get(i)))return!1}return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return-1===r}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return-1===r}if(!n||"object"==typeof t){for(n in r=0,t){if(v.call(t,n)&&++r&&!v.call(e,n))return!1;if(!(n in e)||!k(t[n],e[n]))return!1}return Object.keys(e).length===r}}return t!=t&&e!=e}const b=(t={})=>Object.assign({},a,t);function E(t,e,n){const r=e;function i(t,e){const n=t.charAt(0);return o(Object.assign({"":n},r[n]),t.slice(1),e,e+1)}function o(t,e,r,a){if(!e)return n||1===Object.keys(t).length?t[""]?[[r,a,t[""]]]:[]:[[r,a,null]];if(1===Object.keys(t).length)return[[r,a,t[""]]].concat(i(e,a));const s=function(t,e){if(void 0!==t[e])return Object.assign({"":t[""]+e},t[e])}(t,e.charAt(0));return void 0===s?[[r,a,t[""]]].concat(i(e,a)):o(s,e.slice(1),r,a+1)}return i(t,0)}function w(e){return Object.entries(e).reduce(((e,[n,r])=>{const i="string"===t(r);return e[n]=i?{"":r}:w(r),e}),{})}function O(t,e){return e.split("").reduce(((t,e)=>(void 0===t[e]&&(t[e]={}),t[e])),t)}function S(e={}){const n={};return"object"===t(e)&&Object.entries(e).forEach((([t,e])=>{let r=n;t.split("").forEach((t=>{void 0===r[t]&&(r[t]={}),r=r[t]})),r[""]=e})),function(e){return function e(n,r){return void 0===n||"string"===t(n)?r:Object.entries(r).reduce(((t,[r,i])=>(t[r]=e(n[r],i),t)),n)}(JSON.parse(JSON.stringify(e)),n)}}function I(e,n){return n?"function"===t(n)?n(e):S(n)(e):e}const x={a:"あ",i:"い",u:"う",e:"え",o:"お",k:{a:"か",i:"き",u:"く",e:"け",o:"こ"},s:{a:"さ",i:"し",u:"す",e:"せ",o:"そ"},t:{a:"た",i:"ち",u:"つ",e:"て",o:"と"},n:{a:"な",i:"に",u:"ぬ",e:"ね",o:"の"},h:{a:"は",i:"ひ",u:"ふ",e:"へ",o:"ほ"},m:{a:"ま",i:"み",u:"む",e:"め",o:"も"},y:{a:"や",u:"ゆ",o:"よ"},r:{a:"ら",i:"り",u:"る",e:"れ",o:"ろ"},w:{a:"わ",i:"ゐ",e:"ゑ",o:"を"},g:{a:"が",i:"ぎ",u:"ぐ",e:"げ",o:"ご"},z:{a:"ざ",i:"じ",u:"ず",e:"ぜ",o:"ぞ"},d:{a:"だ",i:"ぢ",u:"づ",e:"で",o:"ど"},b:{a:"ば",i:"び",u:"ぶ",e:"べ",o:"ぼ"},p:{a:"ぱ",i:"ぴ",u:"ぷ",e:"ぺ",o:"ぽ"},v:{a:"ゔぁ",i:"ゔぃ",u:"ゔ",e:"ゔぇ",o:"ゔぉ"}},B={".":"。",",":"、",":":"：","/":"・","!":"！","?":"？","~":"〜","-":"ー","‘":"「","’":"」","“":"『","”":"』","[":"［","]":"］","(":"（",")":"）","{":"｛","}":"｝"},N={k:"き",s:"し",t:"ち",n:"に",h:"ひ",m:"み",r:"り",g:"ぎ",z:"じ",d:"ぢ",b:"び",p:"ぴ",v:"ゔ",q:"く",f:"ふ"},A={ya:"ゃ",yi:"ぃ",yu:"ゅ",ye:"ぇ",yo:"ょ"},L={a:"ぁ",i:"ぃ",u:"ぅ",e:"ぇ",o:"ぉ"},C={sh:"sy",ch:"ty",cy:"ty",chy:"ty",shy:"sy",j:"zy",jy:"zy",shi:"si",chi:"ti",tsu:"tu",ji:"zi",fu:"hu"},q=Object.assign({tu:"っ",wa:"ゎ",ka:"ヵ",ke:"ヶ"},L,A),J={yi:"い",wu:"う",ye:"いぇ",wi:"うぃ",we:"うぇ",kwa:"くぁ",whu:"う",tha:"てゃ",thu:"てゅ",tho:"てょ",dha:"でゃ",dhu:"でゅ",dho:"でょ"},R={wh:"う",kw:"く",qw:"く",q:"く",gw:"ぐ",sw:"す",ts:"つ",th:"て",tw:"と",dh:"で",dw:"ど",fw:"ふ",f:"ふ"};function M(){const t=w(x),e=e=>O(t,e);function n(t){return Object.entries(t).reduce(((t,[e,r])=>(t[e]=e?n(r):`っ${r}`,t)),{})}return Object.entries(N).forEach((([t,n])=>{Object.entries(A).forEach((([r,i])=>{e(t+r)[""]=n+i}))})),Object.entries(B).forEach((([t,n])=>{e(t)[""]=n})),Object.entries(R).forEach((([t,n])=>{Object.entries(L).forEach((([r,i])=>{e(t+r)[""]=n+i}))})),["n","n'","xn"].forEach((t=>{e(t)[""]="ん"})),t.c=JSON.parse(JSON.stringify(t.k)),Object.entries(C).forEach((([t,n])=>{const r=t.slice(0,t.length-1),i=t.charAt(t.length-1);e(r)[i]=JSON.parse(JSON.stringify(e(n)))})),Object.entries(q).forEach((([t,n])=>{const r=t=>t.charAt(t.length-1),i=t=>t.slice(0,t.length-1),o=e(`x${t}`);o[""]=n;var a;e(`l${i(t)}`)[r(t)]=o,(a=t,[...Object.entries(C),["c","k"]].reduce(((t,[e,n])=>a.startsWith(n)?t.concat(a.replace(n,e)):t),[])).forEach((n=>{["l","x"].forEach((o=>{e(o+i(n))[r(n)]=e(o+t)}))}))})),Object.entries(J).forEach((([t,n])=>{e(t)[""]=n})),[...Object.keys(N),"c","y","w","j"].forEach((e=>{const r=t[e];r[e]=n(r)})),delete t.n.n,Object.freeze(JSON.parse(JSON.stringify(t)))}let T=null;const W=S({wi:"ゐ",we:"ゑ"});function z(t=""){return!e(t)&&n(t,65,90)}function P(t=""){return!e(t)&&12540===t.charCodeAt(0)}function V(t=""){return!e(t)&&12539===t.charCodeAt(0)}function K(t=""){return!e(t)&&(!!P(t)||n(t,s,12438))}function $(t=""){const e=[];return t.split("").forEach((t=>{if(P(t)||V(t))e.push(t);else if(K(t)){const n=t.charCodeAt(0)+96,r=String.fromCharCode(n);e.push(r)}else e.push(t)})),e.join("")}const D=h(((t,e,n)=>{let r=(null==T&&(T=M()),T);return r=t?function(t){const e=JSON.parse(JSON.stringify(t));return e.n.n={"":"ん"},e.n[" "]={"":"ん"},e}(r):r,r=e?W(r):r,n&&(r=I(r,n)),r}),k);function H(t="",e={},n){let o;return n?o=e:(o=b(e),n=D(o.IMEMode,o.useObsoleteKana,o.customKanaMapping)),function(t="",e={},n){const{IMEMode:r,useObsoleteKana:i,customKanaMapping:o}=e;n||(n=D(r,i,o));return E(t.toLowerCase(),n,!r)}(t,o,n).map((e=>{const[n,a,s]=e;if(null===s)return t.slice(n);const u=o.IMEMode===r,c=o.IMEMode===i||[...t.slice(n,a)].every(z);return u||!c?s:$(s)})).join("")}let U=[];function Q(t){const e=Object.assign({},b(t),{IMEMode:t.IMEMode||!0}),n=D(e.IMEMode,e.useObsoleteKana,e.customKanaMapping),r=[...Object.keys(n),...Object.keys(n).map((t=>t.toUpperCase()))];return function({target:t}){undefined!==t.value&&"true"!==t.dataset.ignoreComposition&&function(t,e,n,r,i){const[o,a,s]=function(t="",e=0,n=[]){let r,i,o;0===e&&n.includes(t[0])?[r,i,o]=function(t,e){return["",..._(t,(t=>e.includes(t)||!y(t,/[0-9]/)))]}(t,n):e>0?[r,i,o]=function(t="",e=0){const[n,r]=_([...t.slice(0,e)].reverse(),(t=>!y(t)));return[r.reverse().join(""),n.split("").reverse().join(""),t.slice(e)]}(t,e):([r,i]=_(t,(t=>!n.includes(t))),[i,o]=_(i,(t=>!y(t))));return[r,i,o]}(t.value,t.selectionEnd,r),u=H(a,e,n);if(a!==u){const e=o.length+u.length,n=o+u+s;t.value=n,s.length?setTimeout((()=>t.setSelectionRange(e,e)),1):t.setSelectionRange(e,e)}}(t,e,n,r)}}function X({type:t,target:e,data:n}){/Mac/.test(window.navigator&&window.navigator.platform)&&("compositionupdate"===t&&y(n)&&(e.dataset.ignoreComposition="true"),"compositionend"===t&&(e.dataset.ignoreComposition="false"))}function _(t={},e=(t=>!!t)){const n=[],{length:r}=t;let i=0;for(;i<r&&e(t[i],i);)n.push(t[i]),i+=1;return[n.join(""),t.slice(i)]}const F={input:({target:{value:t,selectionStart:e,selectionEnd:n}})=>console.log("input:",{value:t,selectionStart:e,selectionEnd:n}),compositionstart:()=>console.log("compositionstart"),compositionupdate:({target:{value:t,selectionStart:e,selectionEnd:n},data:r})=>console.log("compositionupdate",{data:r,value:t,selectionStart:e,selectionEnd:n}),compositionend:()=>console.log("compositionend")},G=["TEXTAREA","INPUT"];let Y=0;function Z(t={},e={},n=!1){if(!G.includes(t.nodeName))throw new Error(`Element provided to Wanakana bind() was not a valid input or textarea element.\n Received: (${JSON.stringify(t)})`);const r=Q(e),i=(Y+=1,`${Date.now()}${Y}`);var o;t.setAttribute("data-wanakana-id",i),t.setAttribute("lang","ja"),t.setAttribute("autoCapitalize","none"),t.setAttribute("autoCorrect","off"),t.setAttribute("autoComplete","off"),t.setAttribute("spellCheck","false"),t.addEventListener("input",r),t.addEventListener("compositionupdate",X),t.addEventListener("compositionend",X),function(t,e,n){U=U.concat({id:t,inputHandler:e,compositionHandler:n})}(i,r,X),!0===n&&(o=t,Object.entries(F).forEach((([t,e])=>o.addEventListener(t,e))))}let tt=null;const et={"あ":"a","い":"i","う":"u","え":"e","お":"o","か":"ka","き":"ki","く":"ku","け":"ke","こ":"ko","さ":"sa","し":"shi","す":"su","せ":"se","そ":"so","た":"ta","ち":"chi","つ":"tsu","て":"te","と":"to","な":"na","に":"ni","ぬ":"nu","ね":"ne","の":"no","は":"ha","ひ":"hi","ふ":"fu","へ":"he","ほ":"ho","ま":"ma","み":"mi","む":"mu","め":"me","も":"mo","ら":"ra","り":"ri","る":"ru","れ":"re","ろ":"ro","や":"ya","ゆ":"yu","よ":"yo","わ":"wa","ゐ":"wi","ゑ":"we","を":"wo","ん":"n","が":"ga","ぎ":"gi","ぐ":"gu","げ":"ge","ご":"go","ざ":"za","じ":"ji","ず":"zu","ぜ":"ze","ぞ":"zo","だ":"da","ぢ":"ji","づ":"zu","で":"de","ど":"do","ば":"ba","び":"bi","ぶ":"bu","べ":"be","ぼ":"bo","ぱ":"pa","ぴ":"pi","ぷ":"pu","ぺ":"pe","ぽ":"po","ゔぁ":"va","ゔぃ":"vi","ゔ":"vu","ゔぇ":"ve","ゔぉ":"vo"},nt={"。":".","、":",","：":":","・":"/","！":"!","？":"?","〜":"~","ー":"-","「":"‘","」":"’","『":"“","』":"”","［":"[","］":"]","（":"(","）":")","｛":"{","｝":"}","　":" "},rt=["あ","い","う","え","お","や","ゆ","よ"],it={"ゃ":"ya","ゅ":"yu","ょ":"yo"},ot={"ぃ":"yi","ぇ":"ye"},at={"ぁ":"a","ぃ":"i","ぅ":"u","ぇ":"e","ぉ":"o"},st=["き","に","ひ","み","り","ぎ","び","ぴ","ゔ","く","ふ"],ut={"し":"sh","ち":"ch","じ":"j","ぢ":"j"},ct={"っ":"","ゃ":"ya","ゅ":"yu","ょ":"yo","ぁ":"a","ぃ":"i","ぅ":"u","ぇ":"e","ぉ":"o"},lt={b:"b",c:"t",d:"d",f:"f",g:"g",h:"h",j:"j",k:"k",m:"m",p:"p",q:"q",r:"r",s:"s",t:"t",v:"v",w:"w",x:"x",z:"z"};function dt(){return null==tt&&(tt=function(){const t=w(et),e=e=>O(t,e),n=(t,n)=>{e(t)[""]=n};return Object.entries(nt).forEach((([t,n])=>{e(t)[""]=n})),[...Object.entries(it),...Object.entries(at)].forEach((([t,e])=>{n(t,e)})),st.forEach((t=>{const r=e(t)[""][0];Object.entries(it).forEach((([e,i])=>{n(t+e,r+i)})),Object.entries(ot).forEach((([e,i])=>{n(t+e,r+i)}))})),Object.entries(ut).forEach((([t,e])=>{Object.entries(it).forEach((([r,i])=>{n(t+r,e+i[1])})),n(`${t}ぃ`,`${e}yi`),n(`${t}ぇ`,`${e}e`)})),t["っ"]=ft(t),Object.entries(ct).forEach((([t,e])=>{n(t,e)})),rt.forEach((t=>{n(`ん${t}`,`n'${e(t)[""]}`)})),Object.freeze(JSON.parse(JSON.stringify(t)))}()),tt}function ft(t){return Object.entries(t).reduce(((t,[e,n])=>{if(e)t[e]=ft(n);else{const r=n.charAt(0);t[e]=Object.keys(lt).includes(r)?lt[r]+n:n}return t}),{})}h(((t,e)=>{let n=function(t){return t===o?dt():{}}(t);return e&&(n=I(n,e)),n}),k);function gt(t){return"u"==t.wordJSON.type||"ru"==t.wordJSON.type||"irv"==t.wordJSON.type?"v":"i"==t.wordJSON.type||"na"==t.wordJSON.type||"ira"==t.wordJSON.type?"a":void 0}function yt(t,e){return t.conjugation.tense!=e}const pt={verb:function(t){return"v"!=gt(t)},verbs:{verbpresent:function(t){return yt(t,"Present")},verbpast:function(t){return yt(t,"Past")},verbte:function(t){return yt(t,"て-form")},verbaffirmative:function(t){return!0!==t.conjugation.affirmative},verbnegative:function(t){return!1!==t.conjugation.affirmative},verbplain:function(t){return!1!==t.conjugation.polite},verbpolite:function(t){return!0!==t.conjugation.polite},verbu:function(t){return"u"!=t.wordJSON.type},verbru:function(t){return"ru"!=t.wordJSON.type},verbirregular:function(t){return"irv"!=t.wordJSON.type}},adjective:function(t){return"a"!=gt(t)},adjectives:{adjectivepresent:function(t){return yt(t,"Present")},adjectivepast:function(t){return yt(t,"Past")},adjectiveadverb:function(t){return yt(t,"Adverb")},adjectiveaffirmative:function(t){return!0!==t.conjugation.affirmative},adjectivenegative:function(t){return!1!==t.conjugation.affirmative},adjectiveplain:function(t){return!1!==t.conjugation.polite},adjectivepolite:function(t){return!0!==t.conjugation.polite},adjectivei:function(t){return"i"!=t.wordJSON.type},adjectivena:function(t){return"na"!=t.wordJSON.type},adjectiveirregular:function(t){return"ira"!=t.wordJSON.type}}},mt=function(t){document.getElementById("verb-text").className=t?"":"hide-furigana"},ht=function(t){document.querySelectorAll(".streak").forEach((e=>{t?e.classList.remove("display-none"):e.classList.add("display-none")}))},vt=function(t){const e=document.getElementById("translation");t?e.classList.remove("transparent"):e.classList.add("transparent")},jt={verbs:[{kanji:"行<rt>い</rt>く",type:"irv",eng:"go"},{kanji:"する",type:"irv",eng:"do, make"},{kanji:"来<rt>く</rt>る",type:"irv",eng:"come"},{kanji:"ある",type:"irv",eng:"have, exists, is (inanimate)"},{kanji:"問<rt>と</rt>う",type:"irv",eng:"ask, accuse"},{kanji:"いる",type:"ru",eng:"exists, is (living things)"},{kanji:"出<rt>で</rt>来<rt>き</rt>る",type:"ru",eng:"able, can do"},{kanji:"始<rt>はじ</rt>める",type:"ru",eng:"begin"},{kanji:"借<rt>か</rt>りる",type:"ru",eng:"borrow, rent"},{kanji:"続<rt>つづ</rt>ける",type:"ru",eng:"continue, proceed"},{kanji:"決<rt>き</rt>める",type:"ru",eng:"decide, choose"},{kanji:"食<rt>た</rt>べる",type:"ru",eng:"eat"},{kanji:"忘<rt>わす</rt>れる",type:"ru",eng:"forget"},{kanji:"降<rt>お</rt>りる",type:"ru",eng:"get off, go down"},{kanji:"疲<rt>つか</rt>れる",type:"ru",eng:"get tired"},{kanji:"起<rt>お</rt>きる",type:"ru",eng:"get up, wake up"},{kanji:"あげる",type:"ru",eng:"give"},{kanji:"出<rt>で</rt>る",type:"ru",eng:"leave, exit, appear"},{kanji:"助<rt>たす</rt>ける",type:"ru",eng:"help"},{kanji:"見<rt>み</rt>る",type:"ru",eng:"see, look"},{kanji:"開<rt>あ</rt>ける",type:"ru",eng:"open"},{kanji:"覚<rt>おぼ</rt>える",type:"ru",eng:"remember, learn"},{kanji:"寝<rt>ね</rt>る",type:"ru",eng:"sleep, go to bed"},{kanji:"閉<rt>し</rt>める",type:"ru",eng:"close"},{kanji:"着<rt>き</rt>る",type:"ru",eng:"put on, wear (shirt, jacket, etc)"},{kanji:"なる",type:"u",eng:"become"},{kanji:"乗<rt>の</rt>る",type:"u",eng:"board, ride"},{kanji:"切<rt>き</rt>る",type:"u",eng:"cut"},{kanji:"やる",type:"u",eng:"do, give"},{kanji:"終<rt>お</rt>わる",type:"u",eng:"end"},{kanji:"上<rt>あ</rt>がる",type:"u",eng:"go up, rise",altOkurigana:["上る"]},{kanji:"知<rt>し</rt>る",type:"u",eng:"know"},{kanji:"作<rt>つく</rt>る",type:"u",eng:"make, build"},{kanji:"帰<rt>かえ</rt>る",type:"u",eng:"return, go home"},{kanji:"取<rt>と</rt>る",type:"u",eng:"take, steal"},{kanji:"買<rt>か</rt>う",type:"u",eng:"buy"},{kanji:"笑<rt>わら</rt>う",type:"u",eng:"laugh, smile"},{kanji:"会<rt>あ</rt>う",type:"u",eng:"meet"},{kanji:"言<rt>い</rt>う",type:"u",eng:"say, utter"},{kanji:"思<rt>おも</rt>う",type:"u",eng:"think, believe"},{kanji:"使<rt>つか</rt>う",type:"u",eng:"use"},{kanji:"持<rt>も</rt>つ",type:"u",eng:"hold, have"},{kanji:"待<rt>ま</rt>つ",type:"u",eng:"wait"},{kanji:"立<rt>た</rt>つ",type:"u",eng:"stand up"},{kanji:"聞<rt>き</rt>く",type:"u",eng:"hear, listen"},{kanji:"引<rt>ひ</rt>く",type:"u",eng:"pull, tug"},{kanji:"履<rt>は</rt>く",type:"u",eng:"put on, wear (pants, skirt, shoes, etc)"},{kanji:"歩<rt>ある</rt>く",type:"u",eng:"walk"},{kanji:"書<rt>か</rt>く",type:"u",eng:"write"},{kanji:"働<rt>はたら</rt>く",type:"u",eng:"work"},{kanji:"死<rt>し</rt>ぬ",type:"u",eng:"die, pass away"},{kanji:"飲<rt>の</rt>む",type:"u",eng:"drink"},{kanji:"楽<rt>たの</rt>しむ",type:"u",eng:"enjoy, have fun"},{kanji:"進<rt>すす</rt>む",type:"u",eng:"advance, go forward"},{kanji:"住<rt>す</rt>む",type:"u",eng:"live, inhabit"},{kanji:"読<rt>よ</rt>む",type:"u",eng:"read"},{kanji:"休<rt>やす</rt>む",type:"u",eng:"rest, be absent"},{kanji:"遊<rt>あそ</rt>ぶ",type:"u",eng:"play, have a good time"},{kanji:"学<rt>まな</rt>ぶ",type:"u",eng:"study, learn"},{kanji:"選<rt>えら</rt>ぶ",type:"u",eng:"choose, select"},{kanji:"返<rt>かえ</rt>す",type:"u",eng:"return (something), put back"},{kanji:"押<rt>お</rt>す",type:"u",eng:"push, press"},{kanji:"治<rt>なお</rt>す",type:"u",eng:"cure, repair"},{kanji:"話<rt>はな</rt>す",type:"u",eng:"talk, speak"},{kanji:"探<rt>さが</rt>す",type:"u",eng:"search, look for"},{kanji:"貸<rt>か</rt>す",type:"u",eng:"lend, loan"},{kanji:"泳<rt>およ</rt>ぐ",type:"u",eng:"swim"},{kanji:"脱<rt>ぬ</rt>ぐ",type:"u",eng:"take off clothes, undress"},{kanji:"急<rt>いそ</rt>ぐ",type:"u",eng:"hurry"},{kanji:"稼<rt>かせ</rt>ぐ",type:"u",eng:"earn income, make money"},{kanji:"寛<rt>くつろ</rt>ぐ",type:"u",eng:"relax, feel at home"},{kanji:"繋<rt>つな</rt>ぐ",type:"u",eng:"connect, link together"},{kanji:"分<rt>わ</rt>かる",type:"u",eng:"understand"},{kanji:"勉<rt>べん</rt>強<rt>きょう</rt>する",type:"irv",eng:"study"},{kanji:"運<rt>うん</rt>動<rt>どう</rt>する",type:"irv",eng:"exercise"},{kanji:"受<rt>う</rt>け<ruby>持<rt>も</rt></ruby>つ",type:"u",eng:"take charge of"},{kanji:"持<rt>も</rt>って<ruby>行<rt>い</rt></ruby>く",type:"irv",eng:"take, carry away"},{kanji:"食<rt>た</rt>べ<ruby>歩<rt>ある</rt></ruby>く",type:"u",eng:"try food at various restaurants"}],adjectives:[{kanji:"いい",type:"ira",eng:"good"},{kanji:"かっこいい",type:"ira",eng:"cool, handsome"},{kanji:"赤<rt>あか</rt>い",type:"i",eng:"red"},{kanji:"新<rt>あたら</rt>しい",type:"i",eng:"new"},{kanji:"暑<rt>あつ</rt>い",type:"i",eng:"hot (weather)"},{kanji:"危<rt>あぶ</rt>ない",type:"i",eng:"dangerous"},{kanji:"美<rt>お</rt>味<rt>い</rt>しい",type:"i",eng:"delicious"},{kanji:"大<rt>おお</rt>きい",type:"i",eng:"big"},{kanji:"遅<rt>おそ</rt>い",type:"i",eng:"late, slow"},{kanji:"面<rt>おも</rt>白<rt>しろ</rt>い",type:"i",eng:"interesting, funny"},{kanji:"可<rt>か</rt>愛<rt>わい</rt>い",type:"i",eng:"cute, pretty"},{kanji:"寒<rt>さむ</rt>い",type:"i",eng:"cold (weather)"},{kanji:"高<rt>たか</rt>い",type:"i",eng:"high, expensive"},{kanji:"楽<rt>たの</rt>しい",type:"i",eng:"fun, pleasant"},{kanji:"小<rt>ちい</rt>さい",type:"i",eng:"small"},{kanji:"詰<rt>つま</rt>らない",type:"i",eng:"uninteresting, boring",altOkurigana:["詰まらない"]},{kanji:"速<rt>はや</rt>い",type:"i",eng:"fast, quick"},{kanji:"古<rt>ふる</rt>い",type:"i",eng:"old (thing)"},{kanji:"欲<rt>ほ</rt>しい",type:"i",eng:"wanted, desired"},{kanji:"難<rt>むずか</rt>しい",type:"i",eng:"difficult"},{kanji:"安<rt>やす</rt>い",type:"i",eng:"cheap"},{kanji:"好<rt>す</rt>き",type:"na",eng:"like"},{kanji:"有<rt>ゆう</rt>名<rt>めい</rt>",type:"na",eng:"famous"},{kanji:"きれい",type:"na",eng:"beautiful, tidy"},{kanji:"嫌<rt>きら</rt>い",type:"na",eng:"dislike"},{kanji:"静<rt>しず</rt>か",type:"na",eng:"quiet"},{kanji:"元<rt>げん</rt>気<rt>き</rt>",type:"na",eng:"healthy"},{kanji:"色<rt>いろ</rt>々<rt>いろ</rt>",type:"na",eng:"various"},{kanji:"心<rt>しん</rt>配<rt>ぱい</rt>",type:"na",eng:"worry, care"},{kanji:"嫌<rt>いや</rt>",type:"na",eng:"unpleasant, detestable"},{kanji:"十<rt>じゅう</rt>分<rt>ぶん</rt>",type:"na",eng:"sufficient"},{kanji:"立<rt>りっ</rt>派<rt>ぱ</rt>",type:"na",eng:"excellent, splendid"},{kanji:"同<rt>おな</rt>じ",type:"na",eng:"same, alike"},{kanji:"大<rt>だい</rt>丈<rt>じょう</rt>夫<rt>ぶ</rt>",type:"na",eng:"okay, safe"},{kanji:"真<rt>ま</rt>っ<ruby>直<rt>す</rt></ruby>ぐ",type:"na",eng:"straight, direct",altOkurigana:["真直ぐ","真すぐ","真っすぐ"]},{kanji:"下<rt>へ</rt>手<rt>た</rt>",type:"na",eng:"unskilled"},{kanji:"簡<rt>かん</rt>単<rt>たん</rt>",type:"na",eng:"simple, easy"},{kanji:"楽<rt>らく</rt>",type:"na",eng:"comfortable, easy"},{kanji:"残<rt>ざん</rt>念<rt>ねん</rt>",type:"na",eng:"unfortunate, disappointing"},{kanji:"必<rt>ひつ</rt>要<rt>よう</rt>",type:"na",eng:"necessary"}]},kt=[];document.getElementById("non-conjugation-settings").querySelectorAll('input[type="checkbox"]').forEach((t=>kt.push(t.getAttribute("name"))));let bt="ontouchstart"in window||navigator.msMaxTouchPoints>0;document.getElementById("press-any-key-text").textContent=bt?"Tap to continue":"Press Enter/Return to continue";const Et=()=>{let t=document.getElementById("options-form").querySelectorAll('[type="checkbox"]'),e={};for(let n of Array.from(t))e[n.name]=!0;return e};function wt(t){let e=JSON.parse(JSON.stringify(t));return kt.forEach((t=>{delete e[t]})),e}function Ot(t){let e=document.getElementById("verb-box").getElementsByTagName("p");for(let n of Array.from(e))n.style.color=t}function St(t){let e=function(t){let e=Math.random();try{for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++){if(e<t[n][r].probability)return t[n][r];e-=t[n][r].probability}throw"no random word chosen"}catch(e){return console.log(e),t[0][0]}}(t);return function(t){document.getElementById("verb-box").style.background="none",document.getElementById("verb-text").innerHTML="<ruby>"+t.wordJSON.kanji+"</ruby>",document.getElementById("translation").textContent=t.wordJSON.eng,document.getElementById("verb-type").textContent=" ",document.getElementById("conjugation-inquery-text").innerHTML=function(t){let e="";return"Past"==t.tense?e+='<div class="conjugation-inquery"><div class="inquery-emoji">⌚</div><div class="inquery-text">Past</div></div> ':"て-form"!=t.tense&&"Adverb"!=t.tense||(e+=t.tense),!0===t.affirmative?e+='<div class="conjugation-inquery"><div class="inquery-emoji">✅</div><div class="inquery-text">Affirmative</div></div> ':!1===t.affirmative&&(e+='<div class="conjugation-inquery"><div class="inquery-emoji">🚫</div><div class="inquery-text">Negative</div></div> '),!0===t.polite?e+='<div class="conjugation-inquery"><div class="inquery-emoji">👔</div><div class="inquery-text">Polite</div></div>':!1===t.polite&&(e+='<div class="conjugation-inquery"><div class="inquery-emoji">👪</div><div class="inquery-text">Plain</div></div>'),e}(t.conjugation)}(e),bt||document.getElementsByTagName("input")[0].focus(),Ot("rgb(232, 232, 232)"),e}class It{constructor(t,e,n,r){this.conjugations=t,this.tense=e,this.affirmative=n,this.polite=r}}function xt(t,e,n,r){let i=r?"問":"と";if("present"==n){if(t&&e)return i+"います";if(t&&!e)return i+"う";if(!t&&e)return[i+"いません",i+"わないです"];if(!t&&!e)return i+"わない"}else if("past"==n){if(t&&e)return i+"いました";if(t&&!e)return i+"うた";if(!t&&e)return[i+"いませんでした",i+"わなかったです"];if(!t&&!e)return i+"わなかった"}else if("te"==n)return i+"うて"}function Bt(t,e,n,r){let i;if("present"==n?t&&e?i="きます":t&&!e?i="くる":!t&&e?i=["きません","こないです"]:t||e||(i="こない"):"past"==n?t&&e?i="きました":t&&!e?i="きた":!t&&e?i=["きませんでした","こなかったです"]:t||e||(i="こなかった"):"te"==n&&(i="きて"),r)if("string"==typeof i)i="来"+i.substring(1);else for(let t=0;t<i.length;t++)i[t]="来"+i[t].substring(1);return i}function Nt(t,e,n,r){let i=r?"行":"い";if("present"==n){if(t&&e)return i+"きます";if(t&&!e)return i+"く";if(!t&&e)return[i+"きません",i+"かないです"];if(!t&&!e)return i+"かない"}else if("past"==n){if(t&&e)return i+"きました";if(t&&!e)return i+"った";if(!t&&e)return[i+"きませんでした",i+"かなかったです"];if(!t&&!e)return i+"かなかった"}else if("te"==n)return i+"って"}function At(t,e){for(let n=1;n<=e.length;n++)if(t[t.length-n]!=e[e.length-n])return!1;return t.replace(e,"")}function Lt(t,e,n,r){let i,o;if(!1!==(i=At(t,"いく"))?o=Nt(e,n,r,!1):!1!==(i=At(t,"行く"))?o=Nt(e,n,r,!0):!1!==(i=At(t,"する"))?o=function(t,e,n){if("present"==n){if(t&&e)return"します";if(t&&!e)return"する";if(!t&&e)return["しません","しないです"];if(!t&&!e)return"しない"}else if("past"==n){if(t&&e)return"しました";if(t&&!e)return"した";if(!t&&e)return["しませんでした","しなかったです"];if(!t&&!e)return"しなかった"}else if("te"==n)return"して"}(e,n,r):!1!==(i=At(t,"くる"))?o=Bt(e,n,r,!1):!1!==(i=At(t,"来る"))?o=Bt(e,n,r,!0):!1!==(i=At(t,"ある"))?o=function(t,e,n){if("present"==n){if(t&&e)return"あります";if(t&&!e)return"ある";if(!t&&e)return["ありません","ないです"];if(!t&&!e)return"ない"}else if("past"==n){if(t&&e)return"ありました";if(t&&!e)return"あった";if(!t&&e)return["ありませんでした","なかったです"];if(!t&&!e)return"なかった"}else if("te"==n)return"あって"}(e,n,r):!1!==(i=At(t,"とう"))?o=xt(e,n,r,!1):!1!==(i=At(t,"問う"))&&(o=xt(e,n,r,!0)),"string"==typeof o)return i+o;if(o&&o.constructor===Array){let t=[];for(let e=0;e<o.length;e++)t[e]=i+o[e];return t}return"Error"}function Ct(t,e,n){if("present"==n){if(t&&e)return["いいです","良いです"];if(t&&!e)return["いい","良い"];if(!t&&e)return["よくないです","よくありません","良くないです","良くありません"];if(!t&&!e)return["よくない","良くない"]}else if("past"==n){if(t&&e)return["よかったです","良かったです"];if(t&&!e)return["よかった","良かった"];if(!t&&e)return["よくなかったです","よくありませんでした","良くなかったです","良くありませんでした"];if(!t&&!e)return["よくなかった","良くなかった"]}else if("adverb"==n)return["よく","良く"]}function qt(t,e,n,r){if("いい"==t)return Ct(e,n,r);if("かっこいい"==t){let t=[].concat(Ct(e,n,r));for(let e=0;e<t.length;e++)t[e]="かっこ"+t[e];return t}}function Jt(t,e){return"u"==e?t.substring(0,t.length-1)+("う"==(n=t.charAt(t.length-1))?"い":"く"==n?"き":"ぐ"==n?"ぎ":"す"==n?"し":"ず"==n?"じ":"つ"==n?"ち":"づ"==n?"ぢ":"ぬ"==n?"に":"ふ"==n?"ひ":"ぶ"==n?"び":"ぷ"==n?"ぴ":"む"==n?"み":"る"==n?"り":void console.log("Input was not う in changeUtoI, was "+n)):t.substring(0,t.length-1);var n}function Rt(t,e){return"u"==e?t.substring(0,t.length-1)+("う"==(n=t.charAt(t.length-1))?"わ":"く"==n?"か":"ぐ"==n?"が":"す"==n?"さ":"ず"==n?"ざ":"つ"==n?"た":"づ"==n?"だ":"ぬ"==n?"な":"ふ"==n?"は":"ぶ"==n?"ば":"ぷ"==n?"ぱ":"む"==n?"ま":"る"==n?"ら":void console.log("Input was not う in changeUtoA, was "+n))+"ない":t.substring(0,t.length-1)+"ない";var n}function Mt(t){return t.substring(0,t.length-1)}let Tt={verb:{present:function(t,e,n,r){return"irv"==e?Lt(t,n,r,"present"):n&&r?Jt(t,e)+"ます":n&&!r?t:!n&&r?[Jt(t,e)+"ません",Rt(t,e)+"です"]:n||r?void 0:Rt(t,e)},past:function(t,e,n,r){if("irv"==e)return Lt(t,n,r,"past");if(n&&r)return Jt(t,e)+"ました";if(n&&!r&&"u"==e)return Mt(t)+("す"==(i=t.charAt(t.length-1))?"した":"く"==i?"いた":"ぐ"==i?"いだ":"む"==i||"ぶ"==i||"ぬ"==i?"んだ":"る"==i||"う"==i||"つ"==i?"った":void console.log("Input was not real verb ending changeToPastPlain, was "+i));if(n&&!r&&"ru"==e)return Jt(t,e)+"た";if(!n&&r){let n=Mt(Rt(t,e))+"かった";return[Jt(t,e)+"ませんでした",n+"です"]}if(!n&&!r){return Mt(Rt(t,e))+"かった"}var i},te:function(t,e){if("irv"==e)return Lt(t,!1,!1,"te");if("u"==e){let e=t.charAt(t.length-1);if("う"==e||"つ"==e||"る"==e)return Mt(t)+"って";if("む"==e||"ぶ"==e||"ぬ"==e)return Mt(t)+"んで";if("く"==e)return Mt(t)+"いて";if("ぐ"==e)return Mt(t)+"いで";if("す"==e)return Mt(t)+"して"}else if("ru"==e)return Jt(t,e)+"て"}},adjective:{present:function(t,e,n,r){return"ira"==e?qt(t,n,r,"present"):n&&r?t+"です":n&&!r&&"i"==e?t:n&&!r&&"na"==e?t+"だ":!n&&r&&"i"==e?[Mt(t)+"くないです",Mt(t)+"くありません"]:!n&&r&&"na"==e?[t+"じゃないです",t+"ではないです",t+"じゃありません",t+"ではありません"]:n||r||"i"!=e?n||r||"na"!=e?void 0:[t+"じゃない",t+"ではない"]:Mt(t)+"くない"},past:function(t,e,n,r){return"ira"==e?qt(t,n,r,"past"):n&&r&&"i"==e?Mt(t)+"かったです":n&&r&&"na"==e?t+"でした":n&&!r&&"i"==e?Mt(t)+"かった":n&&!r&&"na"==e?t+"だった":!n&&r&&"i"==e?[Mt(t)+"くなかったです",Mt(t)+"くありませんでした"]:!n&&r&&"na"==e?[t+"じゃなかったです",t+"ではなかったです",t+"じゃありませんでした",t+"ではありませんでした"]:n||r||"i"!=e?n||r||"na"!=e?void 0:[t+"じゃなかった",t+"ではなかった"]:Mt(t)+"くなかった"},adverb:function(t,e){return"ira"==e?qt(t,!1,!1,"adverb"):"i"==e?Mt(t)+"く":"na"==e?t+"に":void 0}}};function Wt(t,e){return 0==t?"Present":1==t?"Past":2==t&&"verb"==e?"て-form":2==t&&"adjective"==e?"Adverb":void 0}function zt(t){let e,n,r=[],i=!1,o=!1,a=function(t){return"u"==t.type||"ru"==t.type||"irv"==t.type?"verb":"i"==t.type||"na"==t.type||"ira"==t.type?"adjective":void 0}(t);"verb"==a?(n=Tt.verb,e=Object.keys(n)):"adjective"==a&&(n=Tt.adjective,e=Object.keys(n));let s=t.kanji.replace(/<ruby>|<\/ruby>|.?<rt>|<\/rt>/g,"");let u,c,l=function(t){return t.replace(/<ruby>|<\/ruby>|<rt>.*?<\/rt>/g,"")}(t.kanji);for(let d=0;d<4*(e.length-1);d++){d%2==0&&(i=!i),o=!o;let f=Math.floor(d/4);if(i&&!o&&0==f&&"na"!=t.type)continue;u=n[e[f]](s,t.type,i,o),c=n[e[f]](l,t.type,i,o);let g=[];if(t.altOkurigana&&t.altOkurigana.length)for(let r=0;r<t.altOkurigana.length;r++){let a=t.altOkurigana[r];g=g.concat(n[e[f]](a,t.type,i,o))}let y=[];y=y.concat(u,c,g),r.push(new It(y,Wt(f,a),i,o))}u=n[e[e.length-1]](s,t.type),c=n[e[e.length-1]](l,t.type);let d=[];return d=d.concat(u,c),r.push(new It(d,Wt(e.length-1,a),null,null)),r}class Pt{constructor(t,e){this.wordJSON=t,this.conjugation=e,this.probability=0,this.wasRecentlyIncorrect=!1}}function Vt(t){let e=new Array(t);for(let t=0;t<e.length;t++)e[t]=[];return e}class Kt{constructor(t,e){this.word=t,this.wasCorrect=e}}function $t(t){let e=0;for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++)e+=t[n][r].probability;for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++)t[n][r].probability/=e}function Dt(){let t=document.getElementsByClassName("must-choose-one-text");for(let e of Array.from(t))if(e.offsetWidth>0&&e.offsetHeight>0)return void(document.getElementById("back-button").disabled=!0);document.getElementById("back-button").disabled=!1}function Ht(t){Ft(t.currentTarget)}function Ut(t,e){!function(t,e,n){n?function(t,e){-1==t.className.split(" ").indexOf(e)&&(t.className+=" "+e)}(t,e):t.className=t.className.replace(e,"")}(t,"display-none",e)}function Qt(t,e,n){if(n){let n=document.getElementById("back-button");t.textContent=e,Ut(t,!1),n.disabled=!0}else Ut(t,!0),Dt()}function Xt(t,e){for(let n of Array.from(t))if(n.checked!==e)return!1;return!0}function _t(t,e,n,r){Qt(e,n,Xt(t,r))}function Ft(t){_t(t.getElementsByTagName("input"),t.getElementsByClassName("must-choose-one-text")[0],"*Must choose at least 1 option from this category",!1)}function Gt(){let t=[document.querySelectorAll('input[name="verb"]')[0],document.querySelectorAll('input[name="adjective"]')[0]];Ut(document.getElementById("verb-options-container"),!t[0].checked),Ut(document.getElementById("adjective-options-container"),!t[1].checked),_t(t,document.getElementById("top-must-choose"),"*Must choose at least 1 option from this category",!1)}let Yt=[];const Zt=document.querySelectorAll('input[name="verbpresent"]')[0],te=document.querySelectorAll('input[name="verbaffirmative"]')[0],ee=document.querySelectorAll('input[name="verbplain"]')[0];Yt.push(Zt),Yt.push(te),Yt.push(ee);let ne=[];function re(){let t=document.getElementById("verb-tense-group"),e=t.getElementsByClassName("must-choose-one-text")[0],n=Xt(Yt,!0),r=Xt(ne,!1);n&&r?(Qt(e,"*Invalid combination: present, affirmative, plain",!0),Dt()):Ft(t)}ne=ne.concat(Array.from(document.getElementById("verb-tense-group").getElementsByTagName("input")).filter((t=>t!=Zt))),ne=ne.concat(Array.from(document.getElementById("verb-affirmative-polite-container").getElementsByTagName("input")).filter((t=>t!=te&&t!=ee)));let ie=[];const oe=document.querySelectorAll('input[name="adjectivepresent"]')[0],ae=document.querySelectorAll('input[name="adjectiveaffirmative"]')[0],se=document.querySelectorAll('input[name="adjectiveplain"]')[0];ie.push(oe),ie.push(ae),ie.push(se);let ue=[];function ce(){let t=document.getElementById("adjective-type-group"),e=t.getElementsByClassName("must-choose-one-text")[0],n=Xt(ie,!0),r=Xt(ue,!1),i=document.querySelectorAll('input[name="adjectivei"]')[0],o=document.querySelectorAll('input[name="adjectiveirregular"]')[0],a=document.querySelectorAll('input[name="adjectivena"]')[0];n&&r&&!a.checked&&(i.checked||o.checked)?(Qt(e,"*Invalid combination: い/irregular, present, affirmative, plain",!0),Dt()):document.querySelectorAll('input[name="adjective"]')[0].checked&&Ft(t)}function le(t,e){let n=document.getElementsByClassName(t),r=document.getElementById(e);for(let t of Array.from(n))if(t.checked){let t=r.getElementsByClassName("options-group");for(let e of Array.from(t))Ft(e);return void Ut(r,!1)}Ut(r,!0)}function de(){le("verb-uses-affirmative-polite","verb-affirmative-polite-container")}function fe(){le("adjective-uses-affirmative-polite","adjective-affirmative-polite-container")}function ge(t){var e;mt(t.furigana),e=t.emoji,document.getElementById("conjugation-inquery-text").className=e?"":"hide-emojis",ht(t.streak),vt(t.translation)}function ye(t,e){ge(t);let n=Vt(e.length),r=/^verb.+/,i=/^adjective.+/;if(!1!==t.verb){let i=Object.keys(t).filter((t=>r.test(t)));n[0]=[...e[0]];for(let e=0;e<i.length;e++)!1===t[i[e]]&&(n[0]=n[0].filter(pt.verbs[i[e]]))}if(!1!==t.adjective){let r=Object.keys(t).filter((t=>i.test(t)));n[1]=[...e[1]];for(let e=0;e<r.length;e++)!1===t[r[e]]&&(n[1]=n[1].filter(pt.adjectives[r[e]]))}return function(t){for(let e=0;e<t.length;e++)for(let n=0;n<t[e].length;n++)t[e][n].probability=1;$t(t)}(n),n}ue=ue.concat(Array.from(document.getElementById("adjective-tense-group").getElementsByTagName("input")).filter((t=>t!=oe))),ue=ue.concat(Array.from(document.getElementById("adjective-affirmative-polite-container").getElementsByTagName("input")).filter((t=>t!=ae&&t!=se)));class pe{constructor(t,e){this.score=t,this.settings=e}}class me{constructor(t){Z(document.getElementsByTagName("input")[0]),this.initState(t),document.getElementsByTagName("input")[0].addEventListener("keydown",(t=>this.inputKeyPress(t))),document.getElementById("options-button").addEventListener("click",(t=>this.settingsButtonClicked(t))),document.getElementById("options-form").addEventListener("submit",(t=>this.backButtonClicked(t))),document.getElementById("current-streak-text").addEventListener("animationend",(t=>{document.getElementById("current-streak-text").classList.remove(t.animationName)})),document.getElementById("max-streak-text").addEventListener("animationend",(t=>{document.getElementById("max-streak-text").classList.remove(t.animationName)})),document.getElementById("status-box").addEventListener("animationend",(t=>{document.getElementById("status-box").classList.remove(t.animationName)})),document.getElementById("input-tooltip").addEventListener("animationend",(t=>{document.getElementById("input-tooltip").classList.remove(t.animationName)})),function(){let t=document.getElementsByClassName("options-group");for(let e of Array.from(t))e.addEventListener("click",Ht);let e=document.getElementsByClassName("verb-uses-affirmative-polite");for(let t of Array.from(e))t.addEventListener("click",de);let n=document.getElementsByClassName("adjective-uses-affirmative-polite");for(let t of Array.from(n))t.addEventListener("click",fe);document.querySelectorAll('input[name="verb"]')[0].addEventListener("click",Gt),document.querySelectorAll('input[name="adjective"]')[0].addEventListener("click",Gt);let r=document.getElementById("options-view");r.addEventListener("click",re),r.addEventListener("click",ce)}()}resetMainView(){ge(this.state.settings),document.getElementsByTagName("input")[0].disabled=!1,document.getElementsByTagName("input")[0].value="",document.getElementById("input-tooltip").classList.remove("tooltip-fade-animation"),document.getElementById("press-any-key-text").style.display="none",document.getElementById("status-box").style.display="none",this.state.currentStreak0OnReset&&(document.getElementById("current-streak-text").textContent="0",this.state.currentStreak0OnReset=!1),this.state.loadWordOnReset&&(this.state.currentWord=St(this.state.currentWordList),this.state.loadWordOnReset=!1)}onResultsViewKeyDown(t){"13"==(t.keyCode?t.keyCode:t.which)&&(document.removeEventListener("keydown",this.onResultsViewKeyDown),document.removeEventListener("touchend",this.onResultsViewTouchEnd),this.resetMainView())}onResultsViewTouchEnd(t){t.target!=document.getElementById("options-button")&&(document.removeEventListener("keydown",this.onResultsViewKeyDown),document.removeEventListener("touchend",this.onResultsViewTouchEnd),this.resetMainView())}inputKeyPress(t){if("13"==(t.keyCode?t.keyCode:t.which)){let e=document.getElementsByTagName("input")[0];t.stopPropagation();let n=e.value;switch(n[n.length-1]){case"n":n=n.replace(/n$/,"ん");break;case"。":n=n.replace(/。$/,"")}if(!y(n))return void document.getElementById("input-tooltip").classList.add("tooltip-fade-animation");document.getElementById("input-tooltip").classList.remove("tooltip-fade-animation"),e.blur(),mt(!0),vt(!0),function(t,e){let n=document.getElementById("status-box");var r;n.style.display="inline-flex",t.conjugation.conjugations.some((t=>t==e))?(n.style.background="green",document.getElementById("status-text").innerHTML="Correct<br>"+e+" ○"):(document.getElementById("verb-box").style.background=function(t){switch(t){case"u":return"rgb(255, 125, 0)";case"ru":return"rgb(5, 80, 245)";case"irv":case"ira":return"gray";case"i":return"rgb(0, 180, 240)";case"na":return"rgb(143, 73, 40)"}}(t.wordJSON.type),Ot("white"),document.getElementById("verb-type").textContent="u"==(r=t.wordJSON.type)?"う-verb":"ru"==r?"る-verb":"irv"==r||"ira"==r?"Irregular":"i"==r?"い-adjective":"na"==r?"な-adjective":void 0,n.style.background="rgb(218, 5, 5)",document.getElementById("status-text").innerHTML=(""==e?"_":e)+" ×<br>"+t.conjugation.conjugations[0]+" ○")}(this.state.currentWord,n);let r=this.state.currentWord.conjugation.conjugations.some((t=>t==n));!function(t,e,n,r){if(!(t[0].length+t[1].length<3)){if(e.length>=2){let n=e.shift(),r=function(t){let e=2;for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++)e=t[n][r].probability<e&&0!=t[n][r].probability?t[n][r].probability:e;return e}(t);const i=.5,o=.85;let a;n.wasCorrect&&!n.word.wasRecentlyIncorrect?a=r*i:n.wasCorrect&&n.word.wasRecentlyIncorrect?(a=r*o,n.word.wasRecentlyIncorrect=!1):n.wasCorrect||(a=10),n.word.probability=a}r||(n.wasRecentlyIncorrect=!0),e.push(new Kt(n,r)),n.probability=0,$t(t)}}(this.state.currentWordList,this.state.wordsRecentlySeenQueue,this.state.currentWord,r),r?(!function(t=1,e,n){if(0==t)return;let r=document.getElementById("max-streak-text"),i=document.getElementById("current-streak-text");if(parseInt(r.textContent)<=parseInt(i.textContent)){let i=parseInt(r.textContent)+t;r.textContent=i,document.getElementById("max-streak").classList.contains("display-none")||r.classList.add("grow-animation"),e[n].score=i,localStorage.setItem("maxScoreObjects",JSON.stringify(e))}i.textContent=parseInt(i.textContent)+t,document.getElementById("current-streak").classList.contains("display-none")||i.classList.add("grow-animation")}(1,this.state.maxScoreObjects,this.state.maxScoreIndex),this.state.currentStreak0OnReset=!1):this.state.currentStreak0OnReset=!0,this.state.loadWordOnReset=!0,document.getElementsByTagName("input")[0].disabled=!0,document.getElementById("press-any-key-text").style.display="table-cell",document.addEventListener("keydown",this.onResultsViewKeyDown.bind(this)),document.addEventListener("touchend",this.onResultsViewTouchEnd.bind(this)),e.value=""}}settingsButtonClicked(t){document.removeEventListener("keydown",this.onResultsViewKeyDown),document.removeEventListener("touchend",this.onResultsViewTouchEnd);let e=document.getElementById("options-form").querySelectorAll('[type="checkbox"]');for(let t of Array.from(e))t.checked=this.state.settings[t.name];let n=document.getElementsByClassName("options-group");for(let t of Array.from(n))Ft(t);de(),fe(),Gt(),document.getElementById("main-view").style.display="none",document.getElementById("options-view").style.display="block",document.getElementById("donation-seciton").style.display="block"}backButtonClicked(t){t.preventDefault();let e=document.getElementById("options-form").querySelectorAll('[type="checkbox"]'),n={};for(let t of Array.from(e))this.state.settings[t.name]=t.checked,t.offsetWidth>0&&t.offsetHeight>0&&!kt.includes(t.name)&&(n[t.name]=t.checked);localStorage.setItem("settings",JSON.stringify(this.state.settings));let r=function(t,e){let n,r=Object.keys(e);for(let i=0;i<t.length;i++){n=!0;for(let o of r)if(t[i].settings[o]!=e[o]){n=!1;break}if(1==n)return i}return-1}(this.state.maxScoreObjects,n);-1==r&&(this.state.maxScoreObjects.push(new pe(0,n)),localStorage.setItem("maxScoreObjects",JSON.stringify(this.state.maxScoreObjects)),r=this.state.maxScoreObjects.length-1),r!==this.state.maxScoreIndex?(localStorage.setItem("maxScoreIndex",r),this.state.maxScoreIndex=r,this.state.currentStreak0OnReset=!0,this.state.loadWordOnReset=!0,this.state.currentWordList=ye(this.state.settings,this.state.completeWordList)):ge(this.state.settings),document.getElementById("max-streak-text").textContent=this.state.maxScoreObjects[this.state.maxScoreIndex].score,this.resetMainView(),document.getElementById("main-view").style.display="block",document.getElementById("options-view").style.display="none",document.getElementById("donation-seciton").style.display="none"}initState(t){this.state={},this.state.completeWordList=function(t){let e=Vt(t.length);for(let n=0;n<t.length;n++)for(let r=0;r<t[n].length;r++){let i=zt(t[n][r]);for(let o=0;o<i.length;o++)e[n].push(new Pt(t[n][r],i[o]))}return e}(t),localStorage.getItem("maxScoreIndex")?(this.state.maxScoreIndex=parseInt(localStorage.getItem("maxScoreIndex")),this.state.settings=Object.assign(Et(),JSON.parse(localStorage.getItem("settings"))),this.state.maxScoreObjects=JSON.parse(localStorage.getItem("maxScoreObjects"))):(this.state.maxScoreIndex=0,localStorage.setItem("maxScoreIndex",this.state.maxScoreIndex),this.state.settings=Et(),localStorage.setItem("settings",JSON.stringify(this.state.settings)),this.state.maxScoreObjects=[new pe(0,wt(this.state.settings))],localStorage.setItem("maxScoreObjects",JSON.stringify(this.state.maxScoreObjects))),this.state.currentWordList=ye(this.state.settings,this.state.completeWordList),this.state.currentWord=St(this.state.currentWordList),this.state.wordsRecentlySeenQueue=[],this.state.currentStreak0OnReset=!1,this.state.loadWordOnReset=!1,document.getElementById("max-streak-text").textContent=this.state.maxScoreObjects[this.state.maxScoreIndex].score}}new me([jt.verbs,jt.adjectives]),Ut(document.getElementById("toppest-container"),!1);